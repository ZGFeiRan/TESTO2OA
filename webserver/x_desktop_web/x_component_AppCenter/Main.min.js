MWF.xApplication.AppCenter.Main=new Class({Extends:MWF.xApplication.Common.Main,Implements:[Options,Events],options:{style:"default",name:"AppCenter",icon:"icon.png",width:"1000",height:"700",title:MWF.xApplication.AppCenter.LP.title},onQueryLoad:function(){this.lp=MWF.xApplication.AppCenter.LP;this.actions=MWF.Actions.get("x_program_center")},loadApplication:function(t){this.components=[];this.loadTitle();this.contentNode=new Element("div",{styles:this.css.contentNode}).inject(this.content);this.contentModuleArea=new Element("div",{styles:this.css.contentModuleArea}).inject(this.contentNode);this.setContentSize();this.addEvent("resize",this.setContentSize);this.loadModuleContent()},loadTitle:function(){this.titleBar=new Element("div",{styles:this.css.titleBar}).inject(this.content);if(MWF.AC.isProcessPlatformCreator()){this.createApplicationNode=new Element("div",{styles:this.css.createApplicationNode,title:this.lp.export}).inject(this.titleBar);this.createApplicationNode.addEvent("click",function(){this.createApplication()}.bind(this))}this.taskTitleTextNode=new Element("div",{styles:this.css.titleTextNode,text:this.lp.title}).inject(this.titleBar)},setContentSize:function(){var t=this.content.getSize();var e=this.titleBar.getSize();var s=t.y-e.y;this.contentNode.setStyles({height:""+s+"px",overflow:"auto"});var i=t.x*.98;var n=(t.x/320).toInt();var o=n*320;while(o>i){n--;o=n*320}this.contentModuleArea.setStyle("width",""+o+"px")},loadModuleContent:function(){this.actions.listStructure(function(t){this.moduleList=t.data;if(this.moduleList.length){this.moduleList.each(function(t){new MWF.xApplication.AppCenter.Module(this,t)}.bind(this))}else{this.createEmptyElement()}}.bind(this))},createEmptyElement:function(){this.emptyNode=new Element("div",{styles:this.css.emptyNode}).inject(this.contentModuleArea);if(MWF.AC.isProcessPlatformCreator()){this.emptyNode.set("text",this.lp.emptyModuleManagerInfo);this.emptyNode.addEvent("click",function(){this.createApplication()}.bind(this))}else{this.emptyNode.set("text",this.lp.emptyModuleInfo)}},createApplication:function(){new MWF.xApplication.AppCenter.Exporter(this)}});MWF.xApplication.AppCenter.Module=new Class({initialize:function(t,e){this.app=t;this.data=e;this.json=JSON.decode(this.data.data);this.json.structure=this.data.id;this.lp=this.app.lp;this.css=this.app.css;this.content=this.app.contentModuleArea;this.load()},load:function(){this.node=new Element("div",{styles:this.css.moduleNode}).inject(this.content);this.iconNode=new Element("div",{styles:this.css.moduleIconNode}).inject(this.node);this.contentNode=new Element("div",{styles:this.css.moduleContentNode}).inject(this.node);this.nameNode=new Element("div",{styles:this.css.moduleNameNode}).inject(this.contentNode);this.categoryNode=new Element("div",{styles:this.css.moduleCategoryNode}).inject(this.contentNode);this.descriptionNode=new Element("div",{styles:this.css.moduleDescriptionNode}).inject(this.contentNode);this.actionNode=new Element("div",{styles:this.css.moduleActionNode}).inject(this.contentNode);this.nameNode.set("text",this.data.name);this.categoryNode.set("text",this.json.category);this.descriptionNode.set("text",this.data.description);this.actionNode.set("text",this.lp.output);this.loadEvent()},loadEvent:function(){this.actionNode.addEvent("click",function(t){this.outputApp();t.stopPropagation()}.bind(this));this.node.addEvent("click",function(){this.openApp()}.bind(this))},outputApp:function(){new MWF.xApplication.AppCenter.Exporter(this.app,this.json)},openApp:function(){}});MWF.xApplication.AppCenter.Exporter=new Class({initialize:function(t,e){this.app=t;this.lp=this.app.lp;this.css=this.app.css;this.structure=null;this.dlg=null;this.selectData=e||{structure:"",name:"",description:"",processPlatformList:[],portalList:[],queryList:[],cmsList:[]};this.setp=1;this.load()},loadStructure:function(){this.structureRes=this.app.actions.outputStructure(function(t){this.structure=t.data;this.createContent()}.bind(this))},showDlg:function(t){var e=this.app.createApplicationNode.getPosition(this.app.content);var s=this.app.contentNode.getSize();var i=s.x*.9;if(i>600)i=600;var n=s.y*.9;var o=(s.x-i)/2;var a=(s.y-n)/2;var l=this;MWF.require("MWF.xDesktop.Dialog",function(){this.dlg=new MWF.xDesktop.Dialog({title:this.lp.exportTitle,style:"appCenter",top:a+20,left:o,fromTop:e.y,fromLeft:e.x,width:i,height:n,html:"",maskNode:this.app.content,container:this.app.content,buttonList:[{text:this.lp.next,action:function(){l.next()}},{text:this.lp.prev,action:function(){l.prev()}},{text:this.lp.ok,action:function(){l.output()}},{text:this.lp.cancel,action:function(){this.close();if(l.structureRes){if(l.structureRes.isRunning()){l.structureRes.cancel()}l.structureRes=null}MWF.release(l)}}],onPostShow:function(){if(t)t()}.bind(this)});this.dlg.show()}.bind(this))},checkInput:function(){var t=this.moduleNameInput.get("value");var e=this.moduleCategoryInput.get("value");var s=this.moduleDescriptionInput.get("value");if(!t){this.app.notice(this.lp.noNameError,"error");return false}if(!this.selectData.processPlatformList.length&&!this.selectData.portalList.length&&!this.selectData.queryList.length&&!this.selectData.cmsList.length){this.app.notice(this.lp.noModuleError,"error");return false}this.selectData.name=t;this.selectData.category=e;this.selectData.description=s;return true},next:function(){if(this.setp==1){if(this.checkInput())this.showStatus()}},prev:function(){if(this.step==2){if(this.statusContentNode){this.statusContentNode.destroy();this.statusContentNode=null}this.contentNode.setStyle("display","block");this.okBut.setStyle("display","none");this.prevBut.setStyle("display","nonde");this.nextBut.setStyle("display","inline")}},output:function(){if(this.step==2){if(this.checkInput()){this.app.actions.output(this.selectData,function(t){var e=this.app.actions.action.actions["download"].uri;e=e.replace("{flag}",t.data.flag);this.dlg.close();window.open(this.app.actions.action.address+e);MWF.release(this)}.bind(this))}}},showStatus:function(){this.statusContentNode=new Element("div",{styles:this.css.moduleSelectContentAreaNode}).inject(this.contentNode,"after");this.statusTitleNode=new Element("div",{styles:this.css.moduleSelectTitleNode,text:this.lp.selected}).inject(this.statusContentNode);this.statusInfoNode=new Element("div",{styles:this.css.moduleSelectContentNode}).inject(this.statusContentNode);var t=this.contentNode.getSize();var e=this.contentNode.getPosition(this.contentNode.getOffsetParent());var s={height:""+t.y+"px",width:""+t.x+"px",top:""+e.y+"px",left:""+e.x+"px","background-color":"#eeeeee"};this.statusContentNode.setStyles(s);var i=this.statusTitleNode.getSize();var n=t.y-i.y-20;this.statusInfoNode.setStyle("height",""+n+"px");this.showStatusList();this.contentNode.setStyle("display","none");this.okBut.setStyle("display","inline");this.prevBut.setStyle("display","inline");this.nextBut.setStyle("display","none");this.step=2},showStatusList:function(){this.showStatusItemList("processPlatformList",["processList","formList","applicationDictList","scriptList"]);this.showStatusItemList("portalList",["pageList","scriptList","widgetList"]);this.showStatusItemList("cmsList",["categoryInfoList","formList","appDictList","scriptList"]);this.showStatusItemList("queryList",["viewList","statList","revealList"])},showStatusItemList:function(e,s){this.selectData[e].each(function(t){new Element("div",{styles:this.css.moduleStatusInforNode1,text:"["+this.lp[e]+"] "+(t.name||t.appName)}).inject(this.statusInfoNode);s.each(function(e){if(t[e]&&t[e].length)t[e].each(function(t){new Element("div",{styles:this.css.moduleStatusInforNode2,text:"["+this.lp[e]+"] "+(t.name||t.categoryName)}).inject(this.statusInfoNode)}.bind(this))}.bind(this))}.bind(this))},load:function(){this.showDlg(function(){this.createLayout();this.loadStructure()}.bind(this))},createLayout:function(){this.nextBut=this.dlg.button.getFirst("input");this.prevBut=this.nextBut.getNext("input");this.okBut=this.prevBut.getNext("input");if(this.setp==1){this.okBut.setStyle("display","none");this.prevBut.setStyle("display","none")}this.node=new Element("div",{styles:this.css.moduleSetupContentNode}).inject(this.dlg.content);this.titleNode=new Element("div",{styles:this.css.moduleSetupTitleNode}).inject(this.node);var t=new Element("div",{styles:this.css.moduleIconNode}).inject(this.titleNode);var e=new Element("div",{styles:this.css.moduleSetupTitleContentNode}).inject(this.titleNode);var s=new Element("div",{styles:this.css.moduleSetupNameNode}).inject(e);var i=new Element("div",{styles:this.css.moduleSetupCategoryNode}).inject(e);var n=new Element("div",{styles:this.css.moduleSetupDescriptionNode}).inject(e);var o=new Element("div",{styles:this.css.moduleInputTitleNode,text:this.lp.moduleName}).inject(s);var a=new Element("div",{styles:this.css.moduleInputContentNode}).inject(s);this.moduleNameInput=new Element("input",{styles:this.css.moduleInputNode}).inject(a);var l=new Element("div",{styles:this.css.moduleInputTitleNode,text:this.lp.moduleCategory}).inject(i);var c=new Element("div",{styles:this.css.moduleInputContentNode}).inject(i);this.moduleCategoryInput=new Element("input",{styles:this.css.moduleInputNode}).inject(c);var h=new Element("div",{styles:this.css.moduleInputTitleNode,text:this.lp.moduleDescription}).inject(n);var p=new Element("div",{styles:this.css.moduleInputContentNode}).inject(n);this.moduleDescriptionInput=new Element("input",{styles:this.css.moduleInputNode}).inject(p);this.moduleNameInput.set("value",this.selectData.name);this.moduleCategoryInput.set("value",this.selectData.category);this.moduleDescriptionInput.set("value",this.selectData.description);this.contentNode=new Element("div",{styles:this.css.moduleSetupCompareContentNode}).inject(this.node);this.setListContentSize();this.createLoading(this.contentNode)},setListContentSize:function(){var t=this.dlg.content.getSize();var e=t.y;var s=this.titleNode.getSize().y+10;var i=e-s-10;this.contentNode.setStyle("height",""+i+"px")},createLoading:function(t){this.nextBut.setStyle("display","none");this.loadingAreaNode=new Element("div",{styles:this.css.moduleLoadingAreaNode}).inject(t);var e=new Element("img",{styles:this.css.moduleLoadingImgNode,src:this.app.path+this.app.options.style+"/icon/loading.gif"}).inject(this.loadingAreaNode)},clearLoading:function(){if(this.loadingAreaNode){this.loadingAreaNode.destroy();this.loadingAreaNode=null}this.nextBut.setStyle("display","inline")},createContent:function(){this.clearLoading();this.createListArea();this.loadProcessList();this.loadPortalList();this.loadCMSList();this.loadQueryList()},createListArea:function(){this.contentAreaNode=new Element("div").inject(this.contentNode);this.processAreaTitle=new Element("div",{styles:this.css.moduleSetupListAreaTitleNode,text:this.lp.process}).inject(this.contentAreaNode);this.processAreaContent=new Element("div",{styles:this.css.moduleSetupListAreaContentNode}).inject(this.contentAreaNode);this.portalAreaTitle=new Element("div",{styles:this.css.moduleSetupListAreaTitleNode,text:this.lp.portal}).inject(this.contentAreaNode);this.portalAreaContent=new Element("div",{styles:this.css.moduleSetupListAreaContentNode}).inject(this.contentAreaNode);this.cmsAreaTitle=new Element("div",{styles:this.css.moduleSetupListAreaTitleNode,text:this.lp.cms}).inject(this.contentAreaNode);this.cmsAreaContent=new Element("div",{styles:this.css.moduleSetupListAreaContentNode}).inject(this.contentAreaNode);this.queryAreaTitle=new Element("div",{styles:this.css.moduleSetupListAreaTitleNode,text:this.lp.query}).inject(this.contentAreaNode);this.queryAreaContent=new Element("div",{styles:this.css.moduleSetupListAreaContentNode}).inject(this.contentAreaNode)},loadProcessList:function(){this.processListNodes=[];this.structure.processPlatformList.each(function(t){var e=null;for(var s=0;s<this.selectData.processPlatformList.length;s++){if(this.selectData.processPlatformList[s].id==t.id){e=this.selectData.processPlatformList[s];break}}this.processListNodes.push(new MWF.xApplication.AppCenter.Exporter.ProcessElement(this,this.processAreaContent,t,e))}.bind(this))},loadPortalList:function(){this.portalListNodes=[];this.structure.portalList.each(function(t){this.portalListNodes.push(new MWF.xApplication.AppCenter.Exporter.PortalElement(this,this.portalAreaContent,t))}.bind(this))},loadCMSList:function(){this.cmsListNodes=[];this.structure.cmsList.each(function(t){this.cmsListNodes.push(new MWF.xApplication.AppCenter.Exporter.CmsElement(this,this.cmsAreaContent,t))}.bind(this))},loadQueryList:function(){this.queryListNodes=[];this.structure.queryList.each(function(t){this.queryListNodes.push(new MWF.xApplication.AppCenter.Exporter.QueryElement(this,this.queryAreaContent,t))}.bind(this))}});MWF.xApplication.AppCenter.Exporter.Element=new Class({initialize:function(t,e,s,i){this.exporter=t;this.app=this.exporter.app;this.data=s;this.lp=this.app.lp;this.css=this.app.css;this.content=e;this.initPostData(i);this.load()},initPostData:function(t){this.postData=t||{id:this.data.id,name:this.data.name||this.data.appName,alias:this.data.alias,description:this.data.description,processList:[],formList:[],applicationDictList:[],scriptList:[]}},load:function(){this.contentNode=new Element("div",{styles:this.css.moduleSetupListContentNode}).inject(this.content);this.iconNode=new Element("div",{styles:this.css.moduleSetupListIconNode}).inject(this.contentNode);this.actionNode=new Element("div",{styles:this.css.moduleSetupListActionNode}).inject(this.contentNode);this.inforNode=new Element("div",{styles:this.css.moduleSetupListInforNode}).inject(this.contentNode);this.nameNode=new Element("div",{styles:this.css.moduleSetupListNameNode}).inject(this.contentNode);this.nameNode.set(this.getNameContent());this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_none.png) center center no-repeat");this.action=new Element("div",{styles:this.css.moduleSelectActionNode,text:this.lp.select}).inject(this.actionNode);this.setEvent();this.checkSelect(this.postData)},setEvent:function(){this.contentNode.addEvents({mouseover:function(){this.contentNode.setStyles(this.css.moduleSetupListContentNode_over)}.bind(this),mouseout:function(){this.contentNode.setStyles(this.css.moduleSetupListContentNode)}.bind(this)});this.action.addEvent("click",function(){this.selectElements()}.bind(this));this.nameNode.addEvent("click",function(){this.selectElements()}.bind(this))},getNameContent:function(){return{title:this.lp.name+": "+this.data.name+" "+this.lp.id+": "+this.data.id,text:this.data.name}},selectElements:function(){new MWF.xApplication.AppCenter.Exporter.Element.Selector(this,this.data)},checkSelect:function(t){this.postData.processList=t.processList;this.postData.formList=t.formList;this.postData.applicationDictList=t.applicationDictList;this.postData.scriptList=t.scriptList;this.exporter.selectData.processPlatformList.erase(this.postData);if(t.processList.length||t.formList.length||t.applicationDictList.length||t.scriptList.length){this.exporter.selectData.processPlatformList.push(this.postData);if(t.processList.length==this.data.processList.length&&t.formList.length==this.data.formList.length&&t.applicationDictList.length==this.data.applicationDictList.length&&t.scriptList.length==this.data.scriptList.length){this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_all.png) center center no-repeat")}else{this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_part.png) center center no-repeat")}}else{this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_none.png) center center no-repeat")}}});MWF.xApplication.AppCenter.Exporter.ProcessElement=new Class({Extends:MWF.xApplication.AppCenter.Exporter.Element});MWF.xApplication.AppCenter.Exporter.PortalElement=new Class({Extends:MWF.xApplication.AppCenter.Exporter.Element,initPostData:function(t){this.postData=t||{id:this.data.id,name:this.data.name||this.data.appName,alias:this.data.alias,description:this.data.description,pageList:[],scriptList:[],widgetList:[]}},selectElements:function(){new MWF.xApplication.AppCenter.Exporter.Element.PortalSelector(this,this.data)},checkSelect:function(t){this.postData.pageList=t.pageList;this.postData.scriptList=t.scriptList;this.postData.widgetList=t.widgetList;if(t.pageList.length||t.scriptList.length||t.widgetList.length){this.exporter.selectData.portalList.push(this.postData);if(t.pageList.length==this.data.pageList.length&&t.scriptList.length==this.data.scriptList.length&&t.widgetList.length==this.data.widgetList.length){this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_all.png) center center no-repeat")}else{this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_part.png) center center no-repeat")}}else{this.exporter.selectData.portalList.erase(this.postData);this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_none.png) center center no-repeat")}}});MWF.xApplication.AppCenter.Exporter.CmsElement=new Class({Extends:MWF.xApplication.AppCenter.Exporter.Element,getNameContent:function(){return{title:this.lp.name+": "+this.data.appName+" "+this.lp.id+": "+this.data.id,text:this.data.appName}},initPostData:function(t){this.postData=t||{id:this.data.id,name:this.data.name||this.data.appName,alias:this.data.alias,description:this.data.description,categoryInfoList:[],formList:[],appDictList:[],scriptList:[]}},selectElements:function(){new MWF.xApplication.AppCenter.Exporter.Element.CmsSelector(this,this.data)},checkSelect:function(t){this.postData.categoryInfoList=t.categoryInfoList;this.postData.formList=t.formList;this.postData.appDictList=t.appDictList;this.postData.scriptList=t.scriptList;if(t.categoryInfoList.length||t.formList.length||t.appDictList.length||t.scriptList.length){this.exporter.selectData.cmsList.push(this.postData);if(t.categoryInfoList.length==this.data.categoryInfoList.length&&t.formList.length==this.data.formList.length&&t.appDictList.length==this.data.appDictList.length&&t.scriptList.length==this.data.scriptList.length){this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_all.png) center center no-repeat")}else{this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_part.png) center center no-repeat")}}else{this.exporter.selectData.cmsList.erase(this.postData);this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_none.png) center center no-repeat")}}});MWF.xApplication.AppCenter.Exporter.QueryElement=new Class({Extends:MWF.xApplication.AppCenter.Exporter.Element,initPostData:function(t){this.postData=t||{id:this.data.id,name:this.data.name||this.data.appName,alias:this.data.alias,description:this.data.description,viewList:[],statList:[],revealList:[]}},selectElements:function(){new MWF.xApplication.AppCenter.Exporter.Element.QuerySelector(this,this.data)},checkSelect:function(t){this.postData.viewList=t.viewList;this.postData.statList=t.statList;this.postData.revealList=t.revealList;if(t.viewList.length||t.statList.length||t.revealList.length){this.exporter.selectData.queryList.push(this.postData);if(t.viewList.length==this.data.viewList.length&&t.statList.length==this.data.statList.length&&t.revealList.length==this.data.revealList.length){this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_all.png) center center no-repeat")}else{this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_part.png) center center no-repeat")}}else{this.exporter.selectData.queryList.erase(this.postData);this.iconNode.setStyle("background","url("+this.app.path+this.app.options.style+"/icon/sel_none.png) center center no-repeat")}}});MWF.xApplication.AppCenter.Exporter.Element.Selector=new Class({initialize:function(t,e){this.element=t;this.app=this.element.app;this.data=e;this.lp=this.app.lp;this.css=this.app.css;this.content=this.element.contentNode;this.areaNode=this.element.exporter.contentNode;this.selectData=this.initData();this.load()},initData:function(){return{processList:[],formList:[],applicationDictList:[],scriptList:[]}},load:function(){this.node=new Element("div",{styles:this.css.moduleSelectContentAreaNode}).inject(this.areaNode,"after");this.titleNode=new Element("div",{styles:this.css.moduleSelectTitleNode,text:this.data.name}).inject(this.node);var t=this.content.getSize();this.node.setStyle("width",""+t.x+"px");this.node.position({relativeTo:this.content,position:"topLeft",edge:"topLeft"});this.element.exporter.dlg.button.setStyle("display","none");this.show()},show:function(){var t=this.areaNode.getSize();var e=t.y+40;var s=t.x;var i=this.areaNode.getPosition(this.areaNode.getOffsetParent());var n={height:""+e+"px",width:""+s+"px",top:""+i.y+"px",left:""+i.x+"px","background-color":"#eeeeee"};this.morph=new Fx.Morph(this.node,{duration:100});this.morph.start(n).chain(function(){this.loadContent()}.bind(this))},hide:function(){if(!this.morph)this.morph=new Fx.Morph(this.node,{duration:100});this.areaNode.setStyle("display","block");this.element.exporter.dlg.button.setStyle("display","block");var t=this.content.getSize();var e=t.y;var s=t.x;var i=this.content.getPosition(this.areaNode);var n=this.node.getPosition(this.node.getOffsetParent());var o=n.x+i.x;var a=n.y+i.y;var l={height:""+e+"px",width:""+s+"px",top:""+a+"px",left:""+o+"px"};this.contentNode.destroy();this.morph.start(l).chain(function(){this.node.destroy();MWF.release(this)}.bind(this))},loadContent:function(){this.areaNode.setStyle("display","none");this.contentNode=new Element("div",{styles:this.css.moduleSelectContentNode}).inject(this.node);this.buttonNode=new Element("div",{styles:this.css.moduleSelectButtonNode}).inject(this.node);this.cancelButton=new Element("div",{styles:this.css.moduleSelectButtonActionNode,text:this.lp.cancel}).inject(this.buttonNode);this.okButton=new Element("div",{styles:this.css.moduleSelectButtonActionNode,text:this.lp.ok}).inject(this.buttonNode);this.setContentHeight();this.loadContentList();this.cancelButton.addEvent("click",function(){this.hide()}.bind(this));this.okButton.addEvent("click",function(){this.checkSelect()}.bind(this))},checkSelect:function(){this.selectData.processList=this.getCheckedList(this.listProcessContent);this.selectData.formList=this.getCheckedList(this.listFormContent);this.selectData.applicationDictList=this.getCheckedList(this.listDictContent);this.selectData.scriptList=this.getCheckedList(this.listScriptContent);this.element.checkSelect(this.selectData);this.hide()},getCheckedList:function(t){var e=[];t.getElements("input").each(function(t){if(t.checked){e.push(t.retrieve("data"))}}.bind());return e},setContentHeight:function(){var t=this.node.getSize();var e=this.titleNode.getSize();var s=this.buttonNode.getSize();var i=t.y-e.y-s.y;this.contentNode.setStyle("height",""+i+"px")},loadContentList:function(){this.contentAreaNode=new Element("div",{styles:{overflow:"hidden"}}).inject(this.contentNode);this.listProcessContent=this.listProcess("processList");this.listFormContent=this.listProcess("formList");this.listDictContent=this.listProcess("applicationDictList");this.listScriptContent=this.listProcess("scriptList")},listProcess:function(t){var e=new Element("div",{styles:this.css.moduleSelectContentTitleNode}).inject(this.contentAreaNode);var s=new Element("div",{styles:this.css.moduleSelectContentTitleButtonNode}).inject(e);var i=new Element("div",{styles:this.css.moduleSelectContentTitleButtonActionNode,text:this.lp.inverse}).inject(s);var n=new Element("div",{styles:this.css.moduleSelectContentTitleButtonActionNode,text:this.lp.selectAll}).inject(s);var o=new Element("div",{styles:this.css.moduleSelectContentTitleTextNode,text:this.lp[t]}).inject(e);var a=new Element("div",{styles:this.css.moduleSelectContentListNode}).inject(this.contentAreaNode);this.listProcessItems(t,a);i.addEvent("click",function(){inputs=a.getElements("input");inputs.each(function(t){t.set("checked",!t.get("checked"))})});n.addEvent("click",function(){inputs=a.getElements("input");inputs.each(function(t){t.set("checked",true)})});return a},listProcessItems:function(a,l){this.data[a].each(function(t){var e=new Element("div",{styles:this.css.moduleSelectContentListItemNode}).inject(l);var s=false;var i=this.element.postData[a];if(i){for(var n=0;n<i.length;n++){if(i[n].id==t.id){s=true;break}}}var o=new Element("input",{styles:{float:"left"},type:"checkbox",checked:s,value:t.id}).inject(e);new Element("div",{styles:{float:"left"},text:this.getItemName(t),events:{click:function(){o.click()}}}).inject(e);o.store("data",t)}.bind(this))},getItemName:function(t){return t.name}});MWF.xApplication.AppCenter.Exporter.Element.ProcessSelector=new Class({Extends:MWF.xApplication.AppCenter.Exporter.Element.Selector});MWF.xApplication.AppCenter.Exporter.Element.PortalSelector=new Class({Extends:MWF.xApplication.AppCenter.Exporter.Element.Selector,initData:function(){return{pageList:[],scriptList:[],widgetList:[]}},checkSelect:function(){this.selectData.pageList=this.getCheckedList(this.listPageContent);this.selectData.scriptList=this.getCheckedList(this.listScriptContent);this.selectData.widgetList=this.getCheckedList(this.listWidgetContent);this.element.checkSelect(this.selectData);this.hide()},loadContentList:function(){this.contentAreaNode=new Element("div",{styles:{overflow:"hidden"}}).inject(this.contentNode);this.listPageContent=this.listProcess("pageList");this.listScriptContent=this.listProcess("scriptList");this.listWidgetContent=this.listProcess("widgetList")}});MWF.xApplication.AppCenter.Exporter.Element.CmsSelector=new Class({Extends:MWF.xApplication.AppCenter.Exporter.Element.Selector,initData:function(){return{categoryInfoList:[],formList:[],appDictList:[],scriptList:[]}},checkSelect:function(){this.selectData.categoryInfoList=this.getCheckedList(this.listCategoryInfoContent);this.selectData.formList=this.getCheckedList(this.listFormContent);this.selectData.appDictList=this.getCheckedList(this.listDictContent);this.selectData.scriptList=this.getCheckedList(this.listScriptContent);this.element.checkSelect(this.selectData);this.hide()},loadContentList:function(){this.contentAreaNode=new Element("div",{styles:{overflow:"hidden"}}).inject(this.contentNode);this.listCategoryInfoContent=this.listProcess("categoryInfoList");this.listFormContent=this.listProcess("formList");this.listDictContent=this.listProcess("appDictList");this.listScriptContent=this.listProcess("scriptList")},getItemName:function(t){return t.name||t.categoryName}});MWF.xApplication.AppCenter.Exporter.Element.QuerySelector=new Class({Extends:MWF.xApplication.AppCenter.Exporter.Element.Selector,initData:function(){return{viewList:[],statList:[],revealList:[]}},checkSelect:function(){this.selectData.viewList=this.getCheckedList(this.listViewContent);this.selectData.statList=this.getCheckedList(this.listStatContent);this.selectData.revealList=this.getCheckedList(this.listRevealContent);this.element.checkSelect(this.selectData);this.hide()},loadContentList:function(){this.contentAreaNode=new Element("div",{styles:{overflow:"hidden"}}).inject(this.contentNode);this.listViewContent=this.listProcess("viewList");this.listStatContent=this.listProcess("statList");this.listRevealContent=this.listProcess("revealList")}});