MWF.xApplication.process=MWF.xApplication.process||{};MWF.xApplication.process.ApplicationExplorer=MWF.xApplication.process.ApplicationExplorer||{};MWF.xDesktop.requireApp("process.ApplicationExplorer","lp."+MWF.language,null,false);MWF.xApplication.process.ApplicationExplorer.Main=new Class({Extends:MWF.xApplication.Common.Main,Implements:[Options,Events],options:{style:"default",name:"process.ApplicationExplorer",icon:"icon.png",width:"1000",height:"600",title:MWF.xApplication.process.ApplicationExplorer.LP.title,tooltip:{cancel:MWF.xApplication.process.ApplicationExplorer.LP.application.action_cancel,ok:MWF.xApplication.process.ApplicationExplorer.LP.application.action_ok,create:MWF.xApplication.process.ApplicationExplorer.LP.application.create,search:MWF.xApplication.process.ApplicationExplorer.LP.application.search,searchText:MWF.xApplication.process.ApplicationExplorer.LP.application.searchText,allCategory:MWF.xApplication.process.ApplicationExplorer.LP.application.allCategory,unCategory:MWF.xApplication.process.ApplicationExplorer.LP.application.unCategory,selectCategory:MWF.xApplication.process.ApplicationExplorer.LP.application.selectCategory,nameLabel:MWF.xApplication.process.ApplicationExplorer.LP.application.name,aliasLabel:MWF.xApplication.process.ApplicationExplorer.LP.application.alias,descriptionLabel:MWF.xApplication.process.ApplicationExplorer.LP.application.description,typeLabel:MWF.xApplication.process.ApplicationExplorer.LP.application.type,iconLabel:MWF.xApplication.process.ApplicationExplorer.LP.application.icon,createApplication_cancel_title:MWF.xApplication.process.ApplicationExplorer.LP.application.createApplication_cancel_title,createApplication_cancel:MWF.xApplication.process.ApplicationExplorer.LP.application.createApplication_cancel,inputApplicationName:MWF.xApplication.process.ApplicationExplorer.LP.application.inputApplicationName,createApplicationSuccess:MWF.xApplication.process.ApplicationExplorer.LP.application.createApplicationSuccess,unDescription:MWF.xApplication.process.ApplicationExplorer.LP.application.unDescription,noProcess:MWF.xApplication.process.ApplicationExplorer.LP.application.noProcess,noForm:MWF.xApplication.process.ApplicationExplorer.LP.application.noForm,noApplication:MWF.xApplication.process.ApplicationExplorer.LP.application.noApplication,noApplicationCreate:MWF.xApplication.process.ApplicationExplorer.LP.application.noApplicationCreate,loadding:MWF.xApplication.process.ApplicationExplorer.LP.application.loadding}},onQueryLoad:function(){this.lp=MWF.xApplication.process.ApplicationExplorer.LP;this.currentContentNode=null},loadApplication:function(t){if(!this.restActions)this.restActions=MWF.Actions.get("x_processplatform_assemble_designer");this.category=null;this.applications=[];this.deleteElements=[];this.createNode();this.loadApplicationContent();if(t)t()},loadApplicationContent:function(){debugger;this.loadToolbar();this.loadCategoryArea();this.loadApplicationArea()},createNode:function(){this.content.setStyle("overflow","hidden");this.node=new Element("div",{styles:{width:"100%",height:"100%",overflow:"hidden"}}).inject(this.content)},loadToolbar:function(){this.toolbarAreaNode=new Element("div",{styles:this.css.toolbarAreaNode}).inject(this.node);this.createCreateAction();this.createSearchAction()},createCreateAction:function(){if(MWF.AC.isProcessPlatformCreator()){this.createApplicationNode=new Element("div",{styles:this.css.createApplicationNode,title:this.options.tooltip.create}).inject(this.toolbarAreaNode);this.createApplicationNode.addEvent("click",function(){this.createApplication()}.bind(this))}},createSearchAction:function(){this.searchApplicationNode=new Element("div",{styles:this.css.searchApplicationNode,text:this.options.title}).inject(this.toolbarAreaNode);this.searchApplicationNode.setStyles({color:"#FFF","font-size":"18px","font-weight":"bold","line-height":"50px","text-align":"right","margin-right":"20px"});return true},importApplication:function(t){MWF.xDesktop.requireApp("process.ApplicationExplorer","Importer",function(){new MWF.xApplication.process.ApplicationExplorer.Importer(this,t).load()}.bind(this))},loadCategoryArea:function(){this.categoryAreaNode=new Element("div",{styles:this.css.categoryAreaNode}).inject(this.node);if(MWF.AC.isProcessPlatformCreator()){this.importActionNode=new Element("div",{styles:this.css.importActionNode,text:this.lp.application.import}).inject(this.categoryAreaNode);this.importActionNode.addEvent("click",function(t){this.importApplication(t)}.bind(this))}this.categoryListAreaNode=new Element("div",{styles:this.css.categoryListAreaNode}).inject(this.categoryAreaNode);this.createAllCategoryItemNode();this.createCategoryNodes()},createCategoryNodes:function(){this.restActions.listApplicationCategory(function(t){var e=null;t.data.each(function(t){if(t.applicationCategory){this.createCategoryItemNode(t.applicationCategory,t.count)}else{e=t}}.bind(this))}.bind(this))},createAllCategoryItemNode:function(){var t=new Element("div",{styles:this.css.allCategoryItemNode,text:this.options.tooltip.allCategory}).inject(this.categoryListAreaNode);t.setStyles(this.css.allCategoryItemNode_current);this.category=t;var e=this;t.addEvents({click:function(){e.clickAllCategoryNode(this)}})},createCategoryItemNode:function(t,e){var i=t||this.options.tooltip.allCategory;var o=new Element("div.categoryItem",{styles:this.css.categoryItemNode,text:e?i+" ("+e+") ":i}).inject(this.categoryListAreaNode);o.store("categoryName",i);var s=this;o.addEvents({mouseover:function(){if(s.category!=this)this.setStyles(s.css.categoryItemNode_over)},mouseout:function(){if(s.category!=this)this.setStyles(s.css.categoryItemNode)},click:function(){s.clickCategoryNode(this)}})},createLoadding:function(){this.loaddingNode=new Element("div",{styles:this.css.noApplicationNode,text:this.options.tooltip.loadding}).inject(this.applicationContentNode)},removeLoadding:function(){if(this.loaddingNode)this.loaddingNode.destroy()},loadApplicationArea:function(){this.applicationAreaNode=new Element("div",{styles:this.css.applicationAreaNode}).inject(this.node);this.setApplicationAreaSize();this.addEvent("resize",this.setApplicationAreaSize);this.applicationContentNode=new Element("div",{styles:this.css.applicationContentNode}).inject(this.applicationAreaNode);this.createLoadding();this.loadApplicationByCategory();this.setApplicationContentSize()},setApplicationAreaSize:function(){var t=this.node.getSize();var e=this.toolbarAreaNode.getSize();var i=this.categoryAreaNode.getSize();var o=t.y-e.y-i.y;this.applicationAreaNode.setStyle("height",""+o+"px");if(this.applicationContentNode){var s=(t.x/282).toInt();var n=282*s;var a=(t.x-n)/2-10;this.applicationContentNode.setStyles({width:""+n+"px","margin-left":""+a+"px"})}},setApplicationContentSize:function(){var t=this.node.getSize();if(this.applicationContentNode){var e=(t.x/282).toInt();var i=282*e;var o=(t.x-i)/2-10;this.applicationContentNode.setStyles({width:""+i+"px","margin-left":""+o+"px"})}},clearDeleteReady:function(){this.deleteElements.each(function(t){t.delAdctionNode.setStyles(this.css.applicationItemDelActionNode);t.node.setStyles(this.css.applicationItemNode);var e=t.topNode.retrieve("bgcolor");t.topNode.setStyle("background-color",e);t.readyDelete=false}.bind(this));this.deleteElements=[];this.checkDeleteApplication()},clickAllCategoryNode:function(){var t=this.categoryListAreaNode.getFirst("div");var e=this.categoryListAreaNode.getElements(".categoryItem");t.setStyles(this.css.allCategoryItemNode_current);this.category=t;e.setStyles(this.css.categoryItemNode);this.loadApplicationByCategory(t);this.clearDeleteReady()},clickCategoryNode:function(t){var e=this.categoryListAreaNode.getFirst("div");e.setStyles(this.css.allCategoryItemNode);var i=this.categoryListAreaNode.getElements(".categoryItem");i.setStyles(this.css.categoryItemNode);t.setStyles(this.css.categoryItemNode_current);this.category=t;this.loadApplicationByCategory(t)},loadApplicationByCategory:function(t){debugger;var e="";if(t){e=t.retrieve("categoryName","")}this.restActions.listApplicationSummary(e,function(t){this.applicationContentNode.empty();if(t.data.length){t.data.each(function(t){var e=new MWF.xApplication.process.ApplicationExplorer.Application(this,t);e.load();this.applications.push(e)}.bind(this))}else{if(MWF.AC.isProcessPlatformCreator()){var e=new Element("div",{styles:this.css.noApplicationNode,text:this.options.tooltip.noApplicationCreate}).inject(this.applicationContentNode);e.addEvent("click",function(){this.createApplication()}.bind(this))}else{var e=new Element("div",{styles:this.css.noApplicationNode,text:this.options.tooltip.noApplication}).inject(this.applicationContentNode)}}}.bind(this))},createApplication:function(){this.createApplicationCreateMarkNode();this.createApplicationCreateAreaNode();this.createApplicationCreateNode();this.applicationCreateAreaNode.inject(this.applicationCreateMarkNode,"after");this.applicationCreateAreaNode.fade("in");$("createApplicationName").focus();this.setApplicationCreateNodeSize();this.setApplicationCreateNodeSizeFun=this.setApplicationCreateNodeSize.bind(this);this.addEvent("resize",this.setApplicationCreateNodeSizeFun)},createApplicationCreateMarkNode:function(){this.applicationCreateMarkNode=new Element("div",{styles:this.css.applicationCreateMarkNode,events:{mouseover:function(t){t.stopPropagation()},mouseout:function(t){t.stopPropagation()}}}).inject(this.node,"after")},createApplicationCreateAreaNode:function(){this.applicationCreateAreaNode=new Element("div",{styles:this.css.applicationCreateAreaNode})},createApplicationCreateNode:function(){this.applicationCreateNode=new Element("div",{styles:this.css.applicationCreateNode}).inject(this.applicationCreateAreaNode);this.applicationCreateNewNode=new Element("div",{styles:this.css.applicationCreateNewNode}).inject(this.applicationCreateNode);this.applicationCreateFormNode=new Element("div",{styles:this.css.applicationCreateFormNode}).inject(this.applicationCreateNode);var t='<table width="100%" height="80%" border="0" cellPadding="0" cellSpacing="0">'+'<tr><td style="height: 30px; line-height: 30px; text-align: left; min-width: 80px; width:25%">'+this.options.tooltip.nameLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createApplicationName" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px; text-align: left">'+this.options.tooltip.aliasLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createApplicationAlias" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px;  text-align: left">'+this.options.tooltip.descriptionLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createApplicationDescription" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px;  text-align: left">'+this.options.tooltip.typeLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createApplicationType" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+"</table>";this.applicationCreateFormNode.set("html",t);this.applicationCancelActionNode=new Element("div",{styles:this.css.applicationCreateCancelActionNode,text:this.options.tooltip.cancel}).inject(this.applicationCreateFormNode);this.applicationCreateOkActionNode=new Element("div",{styles:this.css.applicationCreateOkActionNode,text:this.options.tooltip.ok}).inject(this.applicationCreateFormNode);this.applicationCancelActionNode.addEvent("click",function(t){this.cancelCreateApplication(t)}.bind(this));this.applicationCreateOkActionNode.addEvent("click",function(t){this.okCreateApplication(t)}.bind(this))},setApplicationCreateNodeSize:function(){var t=this.node.getSize();var e=this.content.getSize();this.applicationCreateMarkNode.setStyles({width:""+e.x+"px",height:""+e.y+"px"});this.applicationCreateAreaNode.setStyles({width:""+t.x+"px",height:""+t.y+"px"});var i=t.y*.8;var o=t.y*.2/2;this.applicationCreateNode.setStyles({height:""+i+"px","margin-top":""+o+"px"});var s=this.applicationCreateNewNode.getSize();var n=i*.7;if(n>250)n=250;var a=i*.3/2-s.y;this.applicationCreateFormNode.setStyles({height:""+n+"px","margin-top":""+a+"px"})},cancelCreateApplication:function(t){var e=this;if($("createApplicationName").get("value")||$("createApplicationAlias").get("value")||$("createApplicationDescription").get("value")){this.confirm("warn",t,this.options.tooltip.createApplication_cancel_title,this.options.tooltip.createApplication_cancel,"320px","100px",function(){e.applicationCreateMarkNode.destroy();e.applicationCreateAreaNode.destroy();this.close()},function(){this.close()})}else{this.applicationCreateMarkNode.destroy();this.applicationCreateAreaNode.destroy()}},okCreateApplication:function(t){var e={name:$("createApplicationName").get("value"),alias:$("createApplicationAlias").get("value"),description:$("createApplicationDescription").get("value"),applicationCategory:$("createApplicationType").get("value")};if(e.name){this.restActions.saveApplication(e,function(t){this.applicationCreateMarkNode.destroy();this.applicationCreateAreaNode.destroy();this.restActions.getApplication(t.data.id,function(t){t.data.processList=[];t.data.formList=[];var e=new MWF.xApplication.process.ApplicationExplorer.Application(this,t.data,{where:"top"});e.load();this.applications.push(e)}.bind(this));this.notice(this.options.tooltip.createApplicationSuccess,"success")}.bind(this))}else{$("createApplicationName").setStyle("border-color","red");$("createApplicationName").focus();this.notice(this.options.tooltip.inputApplicationName,"error")}},checkDeleteApplication:function(){if(this.deleteElements.length){if(!this.deleteElementsNode){this.deleteElementsNode=new Element("div",{styles:this.css.deleteElementsNode,text:this.lp.application.deleteElements}).inject(this.node);this.deleteElementsNode.position({relativeTo:this.applicationContentNode,position:"centerTop",edge:"centerbottom"});this.deleteElementsNode.addEvent("click",function(t){this.deleteSelectedElements(t)}.bind(this))}}else{if(this.deleteElementsNode){this.deleteElementsNode.destroy();this.deleteElementsNode=null;delete this.deleteElementsNode}}},deleteSelectedElements:function(t){var e=this;var i=[];this.deleteElements.each(function(t){i.push(t.data.name)});var o=this.lp.application.deleteElementsConfirm+" ("+i.join("、")+") ";var s='<br/><br/><input type="checkbox" id="deleteApplicationAllCheckbox" value="yes">'+this.lp.application.deleteApplicationAllConfirm;o+=s;this.confirm("infor",t,this.lp.application.deleteElementsTitle,{html:o},530,210,function(){o=e.lp.application.deleteElementsConfirmAgain+"<br/><br/><font style='color:red; font-size:14px; font-weight: bold'>"+i.join("、")+"</font>";var s=this.content.getElement("#deleteApplicationAllCheckbox");var n=true;if(s.checked){n=false;o=e.lp.application.deleteElementsAllConfirmAgain+"<br/><br/><font style='color:red; font-size:14px; font-weight: bold'>"+i.join("、")+"</font>"}this.close();e.confirm("infor",t,e.lp.application.deleteElementsTitle,{html:o},420,160,function(){var t=[];var i=0;var o=e.deleteElements.length;var s="";var a=function(){if(i==o){if(s){e.app.notice(s,"error")}}};e.deleteElements.each(function(o){o["delete"](n,function(){t.push(o);i++;if(e.deleteElements.length==i){e.deleteElements=e.deleteElements.filter(function(e,i){return!t.contains(e)});e.checkDeleteApplication()}a()},function(o){s=s?s+"<br/><br/>"+o:o;i++;if(e.deleteElements.length==i){e.deleteElements=e.deleteElements.filter(function(e,i){return!t.contains(e)});e.checkDeleteApplication()}a()})});this.close()},function(){this.close()});this.close()},function(){this.close()})}});MWF.xApplication.process.ApplicationExplorer.Application=new Class({Implements:[Options,Events],options:{where:"bottom",bgColor:["#30afdc","#e9573e","#8dc153","#9d4a9c","#ab8465","#959801","#434343","#ffb400","#9e7698","#00a489"]},initialize:function(t,e,i){this.setOptions(i);this.app=t;this.container=this.app.applicationContentNode;this.css=this.app.css;this.data=e},load:function(){this.node=new Element("div",{styles:this.css.applicationItemNode});this.loadTopNode();this.loadIconNode();this.loadDeleteAction();this.loadExportAction();this.loadTitleNode();this.loadNewNode();this.loadInforNode();this.loadProcessNode();this.loadFormNode();this.node.inject(this.container,this.options.where)},loadTopNode:function(){this.topNode=new Element("div",{styles:this.css.applicationItemTopNode}).inject(this.node);this.topNode.setStyle("background-color",this.options.bgColor[(Math.random()*10).toInt()]);this.topNode.addEvent("click",function(t){this.openApplication(t)}.bind(this))},loadDeleteAction:function(){if(MWF.AC.isProcessPlatformCreator()){if(this.data.creatorPerson==layout.desktop.session.user.name||MWF.AC.isAdministrator()){this.delAdctionNode=new Element("div",{styles:this.css.applicationItemDelActionNode}).inject(this.topNode);this.topNode.addEvents({mouseover:function(){if(!this.readyDelete)this.delAdctionNode.fade("in")}.bind(this),mouseout:function(){if(!this.readyDelete)this.delAdctionNode.fade("out")}.bind(this)});this.delAdctionNode.addEvent("click",function(t){this.checkDeleteApplication(t);t.stopPropagation()}.bind(this))}}},loadExportAction:function(){if(MWF.AC.isProcessPlatformCreator()){if(this.data.creatorPerson==layout.desktop.session.user.name||MWF.AC.isAdministrator()){this.exportAdctionNode=new Element("div",{styles:this.css.applicationItemExportActionNode,title:this.app.lp.application.export}).inject(this.topNode);this.topNode.addEvents({mouseover:function(){if(!this.readyDelete)this.exportAdctionNode.fade("in")}.bind(this),mouseout:function(){if(!this.readyDelete)this.exportAdctionNode.fade("out")}.bind(this)});this.exportAdctionNode.addEvent("click",function(t){this.exportApplication(t);t.stopPropagation()}.bind(this))}}},exportApplication:function(){MWF.xDesktop.requireApp("process.ApplicationExplorer","Exporter",function(){new MWF.xApplication.process.ApplicationExplorer.Exporter(this.app,this.data).load()}.bind(this))},checkDeleteApplication:function(t){if(!this.readyDelete){this.delAdctionNode.setStyles(this.css.applicationItemDelActionNode_select);this.node.setStyles(this.css.applicationItemNode_select);var e=this.topNode.getStyle("background-color");this.topNode.store("bgcolor",e);this.topNode.setStyles(this.css.applicationItemTopNode_select);this.readyDelete=true;this.app.deleteElements.push(this)}else{this.delAdctionNode.setStyles(this.css.applicationItemDelActionNode);this.node.setStyles(this.css.applicationItemNode);var e=this.topNode.retrieve("bgcolor");this.topNode.setStyle("background-color",e);this.readyDelete=false;this.app.deleteElements.erase(this)}this.app.checkDeleteApplication()},delete:function(t,e,i){this._deleteElement(this.data.id,t,function(){this.destroy();if(e)e()}.bind(this),function(t,e,o){var s=o;if(t)s=t.responseText;if(i)i(s)}.bind(this))},_deleteElement:function(t,e,i){this.app.restActions.deleteApplication(t,e,i)},destroy:function(){this.node.destroy();MWF.release(this);delete this},loadNewNode:function(){if(this.data.updateTime){var t=Date.parse(this.data.createTime);var e=new Date;if(t.diff(e,"hour")<12){this.newNode=new Element("div",{styles:this.css.applicationItemNewNode}).inject(this.topNode)}}},loadIconNode:function(){this.iconNode=new Element("div",{styles:this.css.applicationItemIconNode}).inject(this.topNode);if(this.data.icon){this.iconNode.setStyle("background-image","url(data:image/png;base64,"+this.data.icon+")")}else{this.iconNode.setStyle("background-image","url("+"/x_component_process_ApplicationExplorer/$Main/default/icon/application.png)")}this.iconNode.makeLnk({par:this._getLnkPar()})},_getLnkPar:function(){var t="/x_component_process_ApplicationExplorer/$Main/default/lnk.png";if(this.data.icon)t="data:image/png;base64,"+this.data.icon;var e="process.ProcessManager"+this.data.id;return{icon:t,title:this.data.name,par:'process.ProcessManager#{"application": "'+this.data.id+'", "appId": "'+e+'"}'}},loadTitleNode:function(){this.titleNode=new Element("div",{styles:this.css.applicationItemTitileNode}).inject(this.topNode);this.nameNode=new Element("div",{styles:this.css.applicationItemNameNode,text:this.data.name,title:this.data.name+"--"+(this.data.applicationCategory||this.app.options.tooltip.unCategory)}).inject(this.titleNode);this.typeNode=new Element("div",{styles:this.css.applicationItemTypeNode,text:"--"+(this.data.applicationCategory||this.app.options.tooltip.unCategory)}).inject(this.titleNode)},loadInforNode:function(){this.inforNode=new Element("div",{styles:this.css.applicationItemInforNode}).inject(this.node);this.descriptionNode=new Element("div",{styles:this.css.applicationItemDescriptionNode,text:this.data.description||this.app.options.tooltip.unDescription}).inject(this.inforNode)},loadProcessNode:function(){this.processNode=new Element("div",{styles:this.css.applicationItemElNode}).inject(this.inforNode);this.processTitleNode=new Element("div",{styles:this.css.applicationItemElTitleNode,text:"流程"}).inject(this.inforNode);this.processListNode=new Element("div",{styles:this.css.applicationItemElListNode}).inject(this.inforNode);this.loadProcessList()},loadProcessList:function(){if(this.data.processList.length){for(var t=0;t<4..min(this.data.processList.length);t++){var e=this.data.processList[t];var i=new Element("div",{styles:this.css.listItemNode,text:e.name}).inject(this.processListNode);i.store("processId",e.id);var o=this;i.addEvents({click:function(t){o.openProcess(this,t)},mouseover:function(){this.setStyle("color","#3c5eed")},mouseout:function(){this.setStyle("color","#666")}})}}else{var s=new Element("div",{text:this.app.options.tooltip.noProcess,styles:{cursor:"pointer","line-height":"30px"}}).inject(this.processListNode);s.addEvent("click",function(t){this.createNewProcess(t)}.bind(this))}},createNewProcess:function(t){this.openApplication(t,1)},openProcess:function(t,e){var i=t.retrieve("processId");if(i){var o=this;var s={onQueryLoad:function(){this.actions=o.app.actions;this.options.id=i;this.application=o.data}};this.app.desktop.openApplication(e,"process.ProcessDesigner",s)}},loadFormNode:function(){this.formNode=new Element("div",{styles:this.css.applicationItemElNode}).inject(this.inforNode);this.formTitleNode=new Element("div",{styles:this.css.applicationItemElTitleNode,text:"表单"}).inject(this.inforNode);this.formListNode=new Element("div",{styles:this.css.applicationItemElListNode}).inject(this.inforNode);this.loadFormList()},loadFormList:function(){if(this.data.formList.length){for(var t=0;t<4..min(this.data.formList.length);t++){var e=this.data.formList[t];var i=new Element("div",{styles:this.css.listItemNode,text:e.name}).inject(this.formListNode);i.store("formId",e.id);var o=this;i.addEvents({click:function(t){o.openForm(this,t)},mouseover:function(){this.setStyle("color","#3c5eed")},mouseout:function(){this.setStyle("color","#666")}})}}else{var s=new Element("div",{text:this.app.options.tooltip.noForm,styles:{cursor:"pointer"}}).inject(this.formListNode);s.addEvent("click",function(t){this.createNewForm(t)}.bind(this))}},createNewForm:function(t){this.openApplication(t,0)},openForm:function(t,e){var i=t.retrieve("formId");if(i){var o=this;var s={onQueryLoad:function(){this.actions=o.app.actions;this.options.id=i;this.application=o.data}};this.app.desktop.openApplication(e,"process.FormDesigner",s)}},openApplication:function(t,e){var i="process.ProcessManager"+this.data.id;if(this.app.desktop.apps[i]){this.app.desktop.apps[i].setCurrent()}else{this.app.desktop.openApplication(t,"process.ProcessManager",{application:this.data,appId:i,onQueryLoad:function(){this.status={navi:e||null}}})}},loadDateNode:function(){this.dateNode=new Element("div",{styles:this.css.applicationItemDateNode,text:this.data.updateTime}).inject(this.inforNode)}});