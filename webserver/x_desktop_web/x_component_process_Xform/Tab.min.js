MWF.xDesktop.requireApp("process.Xform","$Module",null,false);MWF.require("MWF.widget.Tab",null,false);MWF.xApplication.process.Xform.Tab=MWF.APPTab=new Class({Extends:MWF.APP$Module,_loadUserInterface:function(){this.elements=[];this.containers=[];var t="form";if(layout.mobile)t="mobileForm";this.tab=new MWF.widget.Tab(this.node,{style:t});this._setTabWidgetStyles();this.tab.tabNodeContainer=this.node.getFirst("div");this.tab.contentNodeContainer=this.node.getLast("div");this.tab.load();var e=this.tab.tabNodeContainer.getChildren("div");var s=this.tab.contentNodeContainer.getChildren("div");e.each(function(t,e){this.tab.rebuildTab(s[e],s[e].getFirst(),t)}.bind(this));this.tab.pages[0]._showTab();this.loadSubModule()},loadSubModule:function(){this.tab.pages.each(function(t){var e=t.tabNode;var s=this.form._getDomjson(e);var o=this;var i=this.form._loadModule(s,e,function(){this.tab=o});this.elements.push(i);this.form.modules.push(i);e=t.contentNode;s=this.form._getDomjson(e);o=this;i=this.form._loadModule(s,e,function(){this.tab=o});this.containers.push(i);this.form.modules.push(i)}.bind(this))},_setTabWidgetStyles:function(){if(this.json.tabNodeContainer)this.tab.css.tabNodeContainer=Object.clone(this.json.tabNodeContainer);if(this.json.contentNodeContainer)this.tab.css.contentNodeContainer=Object.clone(this.json.contentNodeContainer);this.tab.css.tabNode=Object.clone(this.json.tabStyles);this.tab.css.tabTextNode=Object.clone(this.json.tabTextStyles);this.tab.css.tabNodeCurrent=Object.clone(this.json.tabCurrentStyles);this.tab.css.tabTextNodeCurrent=Object.clone(this.json.tabTextCurrentStyles)}});