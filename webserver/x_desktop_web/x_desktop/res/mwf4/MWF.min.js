MWF=window.MWF||{};MWF.requiredModules=[];MWF.defaultPath="/res/mwf4/package";MWF.language="zh-cn";var href=window.location.href;var par=href.substr(href.lastIndexOf("?")+1,href.length);if(par){var parList=par.split("&");parList.each(function(e){var t=e.split("=");if(t[0].toLowerCase()=="lg")MWF.language=t[1]||"zh-cn"}.bind(this))}if(href.indexOf("language")!==-1)COMMON["debugger"]=true;MWF.languagePackageStatus="uninitialized";MWF.splitStr=/(,\s*){1}|(;\s*){1}/g;MWF.macro={temp:{}};MWF.require=function(e,t,r,n){if(MWF.requiredModules.indexOf(e)!==-1){if(typeOf(t).toLowerCase()==="function"){t()}else{MWF.runCallback(t,"onSuccess")}return}var i=e.split(".");if(i[i.length-1]==="*"){i[i.length-1]="package"}i.shift();var o=this.defaultPath;if(n){o+="/"+i.join("/")+".min.js"}else{o+="/"+i.join("/")+".js"}var a=true;if(r===false){a=false}if(!layout["debugger"]){o=o.replace(/\.js/,".min.js")}o=o.indexOf("?")!==-1?o+"&v="+COMMON.version:o+"?v="+COMMON.version;var s=new Request({url:o,async:a,method:"get",onSuccess:function(){try{MWF.requiredModules.push(e)}catch(e){MWF.runCallback(t,"onFailure",e);return}if(typeOf(t).toLowerCase()==="function"){t()}else{MWF.runCallback(t,"onSuccess")}},onFailure:function(e){MWF.runCallback(t,"onRequestFailure",e)}});s.send()};MWF.loadLP=function(e){var t=this.defaultPath;t=t+"/lp/"+e+".js";var r=new Request({url:t,async:false,method:"get",onSuccess:function(e){try{Browser.exec(e)}catch(e){}},onFailure:function(e){throw"MWF.loadLP Error: "+e.responseText}});r.send()};MWF.runCallback=function(e,t,r){if(typeOf(e).toLowerCase()==="object"){if(e[t]){e[t].apply(e,r)}}};MWF.getCenterPosition=function(e,t,r){var n=$(e).getPosition();var i=$(e).getSize();var o=$("layout");var a=o?$(o).getSize():$(document.body).getSize();var s=(n.y+i.y)/2-r/2;var u=(n.x+i.x)/2-t/2;if(u+t>a.x){u=a.x-t-10}if(s+r>a.y){s=a.y-r-10}return{x:u,y:s}};MWF.getMarkSize=function(e){var t;if(!e){t=$(document.body).getSize();var r=$(window).getSize();var n=t.y;var i=t.x;if(n<r.y)n=r.y;if(i<r.x)i=r.x;return{x:t.x,y:n}}else{t=$(e).getSize();return{x:t.x,y:t.y}}};MWF.json=function(e,t){var r=JSON.decode(e);var n=t.split(".");var i=r;n.each(function(e){if(e.indexOf("[")!==-1){var t=e.split("[");var r=parseInt(t[1].substr(0,t[1].indexOf("]")));i=i[t[0]][r]}else{i=i[e]}});return i};MWF.getHTMLTemplate=function(e,i,t){var r=true;if(t===false){r=false}var n=new Request.HTML({url:e,async:r,method:"get",onSuccess:function(e,t,r,n){if(typeOf(i).toLowerCase()==="function"){i(e,t,r,n)}else{MWF.runCallback(i,"onSuccess",[e,t,r,n])}}.bind(this),onFailure:function(e){MWF.runCallback(i,"onRequestFailure",[e])}});n.send()};MWF.getRequestText=function(e,r,t){var n=true;if(t===false){n=false}e=e.indexOf("?")!==-1?e+"&v="+COMMON.version:e+"?v="+COMMON.version;var i=new Request({url:e,async:n,method:"get",onSuccess:function(e,t){if(typeOf(r).toLowerCase()==="function"){r(e,t)}else{MWF.runCallback(r,"onSuccess",[e,t])}}.bind(this),onFailure:function(e){MWF.runCallback(r,"onRequestFailure",[e])}});i.send()};MWF.getJSONP=function(e,r,t,n){var i=true;if(t===false){i=false}var o=n||"callback";e=e.indexOf("?")!==-1?e+"&v="+COMMON.version:e+"?v="+COMMON.version;var a=new Request.JSONP({url:e,secure:false,method:"get",noCache:true,async:i,callbackKey:o,onSuccess:function(e,t){if(typeOf(r).toLowerCase()==="function"){r(e,t)}else{MWF.runCallback(r,"onSuccess",[e,t])}}.bind(this),onFailure:function(e){MWF.runCallback(r,"onRequestFailure",[e])}.bind(this),onError:function(e,t){MWF.runCallback(r,"onError",[e,t])}.bind(this)});a.send()};MWF.getJSON=function(e,r,t,n,i){var o=true;if(t===false){o=false}var a=true;if(n===false){a=false}var s=false;if(i===true){s=true}e=e.indexOf("?")!==-1?e+"&v="+COMMON.version:e+"?v="+COMMON.version;var u=new Request.JSON({url:e,secure:false,method:"get",noCache:s,async:o,withCredentials:a,onSuccess:function(e,t){if(typeOf(r).toLowerCase()==="function"){r(e,t)}else{MWF.runCallback(r,"onSuccess",[e,t])}}.bind(this),onFailure:function(e){MWF.runCallback(r,"onRequestFailure",[e])}.bind(this),onError:function(e,t){MWF.runCallback(r,"onError",[e,t])}.bind(this)});u.send()};MWF.restful=function(e,t,r,n,i,o){var a=true;if(i===false){a=false}var s=true;if(o===false){s=false}t=t.indexOf("?")!==-1?t+"&v="+COMMON.version:t+"?v="+COMMON.version;var u=new Request.JSON({url:t,secure:false,method:e,emulation:false,noCache:true,async:a,withCredentials:s,onSuccess:function(e,t){var r=this.getHeader("x-token");if(r){if(layout){if(!layout.session)layout.session={};layout.session.token=r}}if(typeOf(n).toLowerCase()==="function"){n(e,t)}else{MWF.runCallback(n,"onSuccess",[e,t])}},onFailure:function(e){MWF.runCallback(n,"onRequestFailure",[e])}.bind(this),onError:function(e,t){MWF.runCallback(n,"onError",[e,t])}.bind(this)});if(layout["debugger"]){u.setHeader("x-debugger","true")}u.setHeader("Content-Type","application/json; charset=utf-8");if(layout){if(layout.session){if(layout.session.token){u.setHeader("x-token",layout.session.token);u.setHeader("authorization",layout.session.token)}}}u.send(r);return u};MWF.encodeJsonString=function(e){var t=[e];var r=JSON.encode(t);return r.substr(2,r.length-4)};MWF.decodeJsonString=function(e){var t='["'+e+'"]';var r=JSON.decode(t);return r[0]};MWF.getTextSize=function(e,t){var r=new Element("span",{text:e,styles:t}).inject($(document.body));var n=r.getSize();r.destroy();return n};MWF.getCenter=function(e,t,r){debugger;if(!t)t=document.body;var n=t.getSize();var i=t.getPosition(r);var o=t.getScroll();var a=n.x/2;var s=n.y/2;a=a-e.x/2;s=s-e.y/2;a=a+i.x;s=s+i.y;a=a+o.x;s=s+o.y;return{x:a,y:s}};MWF.getEPointer=function(e){var t=0;var r=0;if(typeOf(e)=="element"){var n=e.getPosition(this.content);t=n.x;r=n.y}else{if(Browser.name=="firefox"){t=parseFloat(e.event.clientX||e.event.x);r=parseFloat(e.event.clientY||e.event.y)}else{t=parseFloat(e.event.x);r=parseFloat(e.event.y)}if(e.target){var n=e.target.getPosition(this.content);t=n.x;r=n.y}}return{x:t,y:r}};MWF.getParent=function(e,t){var r=e.parentElement;while(r&&r.tagName.toString().toLowerCase()!==t.toString().toLowerCase()){r=r.parentElement}return r};MWF.getOffset=function(e){if(Browser.name==="firefox"){return{offsetX:e.layerX,offsetY:e.layerY}}else{return{offsetX:e.offsetX,offsetY:e.offsetY}}};String.implement({getAllIndexOf:function(e){var t=[];var r=this.indexOf(e);while(r!==-1){t.push(r);r=this.indexOf(e,r+1)}return t}});Array.implement({trim:function(){var t=[];this.each(function(e){if(e)t.push(e)});return v},isIntersect:function(t){return this.some(function(e){return t.indexOf(e)!==-1})}});Element.implement({appendHTML:function(e,t){if(this.insertAdjacentHTML){var r="beforeEnd";if(t==="before")r="beforeBegin";if(t==="after")r="afterEnd";if(t==="bottom")r="beforeEnd";if(t==="top")r="afterBegin";this.insertAdjacentHTML(r,e)}else{if(t==="bottom")this.innerHTML=this.innerHTML+e;if(t==="top")this.innerHTML=e+this.innerHTML}},positionTo:function(e,t){var r=e.toFloat();var n=t.toFloat();var i=this.getOffsetParent();if(i){var o=i.getPosition();r=r-o.x;n=n-o.y}this.setStyles({top:n,left:r});return this},getBorder:function(){var e=["top","left","right","bottom"];var t=["color","style","width"];var n={};e.each(function(r){t.each(function(e){var t="border-"+r+"-"+e;n[t]=this.getStyle(t)}.bind(this))}.bind(this));return n},isOutside:function(e){var t=this.getCoordinates();var r=this.getCoordinates();if((e.page.x<t.left||e.page.x>t.left+t.width||(e.page.y<t.top||e.page.y>t.top+t.height))&&(e.page.x<r.left||e.page.x>r.left+r.width||(e.page.y<r.top||e.page.y>r.top+r.height)))return true;return false},getAbsolutePosition:function(){var e=0;var t=0;var r=this;e=r.offsetLeft;t=r.offsetTop;r=r.parentElement;while(r&&r.tagName.toString().toLowerCase()!=="body"){e+=r.offsetLeft;t+=r.offsetTop;r=r.offsetParent}return{x:e,y:t}},tweenScroll:function(e,t){if(!this.tweenScrollQueue){this.tweenScrollQueue=[]}if(this.tweenScrollQueue.length){this.tweenScrollQueue.push(e)}else{this.tweenScrollQueue.push(e);this.doTweenScrollQueue(t)}},doTweenScrollQueue:function(t){if(this.tweenScrollQueue.length){var r=this.tweenScrollQueue.length;var e=this.tweenScrollQueue[this.tweenScrollQueue.length-1];var n=this.getScroll();var i=e-n.y;var o=i/t;var a=0;var s=0;var u=window.setInterval(function(){this.scrollTo(0,n.y+a*o);a++;if(a>t){window.clearInterval(u);for(var e=1;e<=r;e++)this.tweenScrollQueue.shift();if(this.tweenScrollQueue.length)this.doTweenScrollQueue(t)}}.bind(this),1)}},isPointIn:function(e,t,r,n,i){if(!r)r=0;if(!n)n=0;var o=this.getPosition(i);var a=this.getSize();return o.x-r<=e&&o.x+a.x+r>=e&&o.y-n<=t&&o.y+a.y+n>=t},isInPointInRect:function(e,t,r,n){var i=this.getPosition();var o=this.getSize();var a={x:i.x,y:i.y};var s={x:i.x+o.x,y:i.y};var u={x:i.x+o.x,y:i.y+o.y};var f={x:i.x,y:i.y+o.y};var l={x:Math.min(e,r),y:Math.min(t,n)};var c={x:Math.max(e,r),y:Math.max(t,n)};if(a.x>=l.x&&a.y>=l.y&&a.x<=c.x&&a.y<=c.y)return true;if(s.x>=l.x&&s.y>=l.y&&s.x<=c.x&&s.y<=c.y)return true;if(u.x>=l.x&&u.y>=l.y&&u.x<=c.x&&u.y<=c.y)return true;if(f.x>=l.x&&f.y>=l.y&&f.x<=c.x&&f.y<=c.y)return true;if(u.x>=l.x&&u.y>=l.y&&a.x<=l.x&&a.y<=l.y)return true;if(u.x>=c.x&&u.y>=c.y&&a.x<=c.x&&a.y<=c.y)return true;if(a.x<=l.x&&s.x>=l.x&&a.y>=l.y&&f.y<=c.y)return true;if(a.y<=l.y&&f.y>=l.y&&a.x>=l.x&&s.x<=c.x)return true;return false},getUsefulSize:function(){var e=this.getSize();var t=this.getStyle("border-left").toInt();var r=this.getStyle("border-bottom").toInt();var n=this.getStyle("border-top").toInt();var i=this.getStyle("border-right").toInt();var o=this.getStyle("padding-left").toInt();var a=this.getStyle("padding-bottom").toInt();var s=this.getStyle("padding-top").toInt();var u=this.getStyle("padding-right").toInt();var f=e.x-o-u;var l=e.y-s-a;return{x:f,y:l}},clearStyles:function(e){this.removeProperty("style");if(e){var t=this.getFirst();while(t){t.clearStyles(e);t=t.getNext()}}},maskIf:function(e,t){var r={"background-color":"#666666",opacity:.4,"z-index":100};if(e){r=Object.merge(r,e)}var n=this.getPosition(this.getOffsetParent());this.mask({destroyOnHide:true,style:r,useIframeShim:true,iframeShimOptions:{browsers:true},onShow:function(){this.shim.shim.setStyles({opacity:0,top:""+n.y+"px",left:""+n.x+"px"})},onClick:t})},scrollToNode:function(e,t){debugger;var r=this.getScrollSize();if(!r.y)return true;var n=t?t.toString().toLowerCase():"bottom";var i=$(e);var o=e.getComputedSize();var a=e.getPosition(this);var s=this.getComputedSize();var u=this.getScroll();if(n==="top"){var f=a.y-s.computedTop;if(f<0)this.scrollTo(u.x,u.y+f);f=o.totalHeight+a.y-s.computedTop-s.height;if(f>0)this.scrollTo(u.x,u.y+f)}else{var f=o.totalHeight+a.y-s.computedTop-s.height;if(f>0)this.scrollTo(u.x,u.y+f);f=a.y-s.computedTop;if(f<0)this.scrollTo(u.x,u.y+f)}}});Object.copy=function(e,r){Object.each(e,function(e,t){switch(typeOf(e)){case"object":Object.copy(e,r[t]);break;default:r[t]=e}})};JSON.format=function(e){var t=this.parseJsonString(0,"",e);return t.substring(0,t.length-2)};JSON.parseJsonString=function(e,t,r){var n="";for(var i=0;i<e;i++)n+="\t";var o=t;if(o)o='"'+o+'": ';var a="";var s=e+1;switch(typeOf(r)){case"object":var u=n+o+"{";var f=n+"}";for(x in r){a+=this.parseJsonString(s,x,r[x])}a=u+"\n"+a.substring(0,a.length-2)+"\n"+f+",\n";break;case"array":var u=n+o+"[";var f=n+"]";r.each(function(e,t){a+=this.parseJsonString(s,"",e)}.bind(this));a=u+"\n"+a.substring(0,a.length-2)+"\n"+f+",\n";break;case"string":a+=n+o+'"'+r+'",\n';break;case"date":a+=n+o+'"'+r+'",\n';break;default:a+=n+o+r+",\n"}return a};Slick.definePseudo("src",function(e){return Element.get(this,"src").indexOf(e)!==-1});Slick.definePseudo("srcarr",function(e){var t=e.split(",");var r=Element.get(this,"src");var n=false;for(var i=0;i<t.length;i++){if(r.indexOf(t[i])!==-1){n=true;break}}return n});Slick.definePseudo("ahref",function(e){var t=Element.get(this,"href");if(!t)t="";t=t.toString().toLowerCase();return t.indexOf(e)!==-1});Slick.definePseudo("rowspanBefore",function(e){var t=MWF.getParent(this,"tr");var r=this.get("rowspan").toInt()||1;var n=t.rowIndex.toInt();return r>1&&n<e.toInt()&&n+r-1>=e});Slick.definePseudo("rowspan",function(){var e=this.get("rowspan").toInt()||1;return e>1});Slick.definePseudo("colspanBefore",function(e){var t=MWF.getParent(this,"tr");var r=this.get("colspan").toInt()||1;var n=this.cellIndex.toInt();return r>1&&n<e.toInt()&&n+r-1>=e.toInt()});Slick.definePseudo("colspan",function(){var e=this.get("colspan").toInt()||1;return e>1});MWF.common=MWF.common||{};MWF.common.getResponseTextPost=function(e,t,r){var i="";var n={url:e,async:false,data:t,method:"post",onSuccess:function(e,t,r,n){i=r}};var o=new Request.HTML(n);o.send();return i};MWF.common.getResponseText=function(e){var i="";var t={url:e,async:false,method:"get",onSuccess:function(e,t,r,n){i=r}};var r=new Request.HTML(t);r.send();return i};MWF.common.toDate=function(e){var t=e.split(" ");if(!t[1])t.push("0:0:0");var r=t[0].split("-");var n=t[1].split(":");return new Date(r[0],parseInt(r[1])-1,r[2],n[0],n[1],n[2])};MWF.release=function(e){var t=typeOf(e);switch(t){case"object":for(var r in e){e[r]=null}break;case"array":for(var n=0;n<e.length;n++){if(e[n])e[n]=null}break}};MWF.grayscale=function(t,e,r,n){try{var i=document.createElement("canvas");var o=i.getContext("2d");var a=new Image;a.src=t;i.width=e||a.width;i.height=r||a.height;o.drawImage(a,0,0);var s=o.getImageData(0,0,i.width,i.height);for(var u=0;u<s.height;u++){for(var f=0;f<s.width;f++){var l=u*4*s.width+f*4;var c=(s.data[l]+s.data[l+1]+s.data[l+2])/3;s.data[l]=c;s.data[l+1]=c;s.data[l+2]=c}}o.putImageData(s,0,0,0,0,s.width,s.height);var v=i.toDataURL();i.destroy();return{status:"success",src:v}}catch(e){return{status:"error",src:t}}};MWF.eventPosition=function(e){var t=0;var r=0;if(Browser.name=="firefox"){t=parseFloat(e.event.clientX||e.event.x);r=parseFloat(e.event.clientY||e.event.y)}else{t=parseFloat(e.event.x);r=parseFloat(e.event.y)}return{x:t,y:r}};MWF.defineProperties=Object.defineProperties||function(e,t){function r(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){return typeof e==="function"}if(typeof e!=="object"||e===null)throw new TypeError("bad desc");var n={};if(t(e,"enumerable"))n.enumerable=!!e.enumerable;if(t(e,"configurable"))n.configurable=!!e.configurable;if(t(e,"value"))n.value=e.value;if(t(e,"writable"))n.writable=!!e.writable;if(t(e,"get")){var i=e.get;if(!r(i)&&typeof i!=="undefined")throw new TypeError("bad get");n.get=i}if(t(e,"set")){var o=e.set;if(!r(o)&&typeof o!=="undefined")throw new TypeError("bad set");n.set=o}if(("get"in n||"set"in n)&&("value"in n||"writable"in n))throw new TypeError("identity-confused descriptor");return n}if(typeof e!=="object"||e===null)throw new TypeError("bad obj");t=Object(t);var n=Object.keys(t);var i=[];for(var o=0;o<n.length;o++)i.push([n[o],r(t[n[o]])]);for(var o=0;o<i.length;o++){if(Object.defineProperty&&(Browser.name=="ie"&&Browser.version!=8)){Object.defineProperty(e,i[o][0],i[o][1])}else{if(i[o][1].value)e[i[o][0]]=i[o][1].value;if(i[o][1].get)e["get"+i[o][0].capitalize()]=i[o][1].get;if(i[o][1].set)e["set"+i[o][0].capitalize()]=i[o][1].set}}return e};MWF.defineProperty=Object.defineProperty&&(Browser.name=="ie"&&Browser.version!=8)?Object.defineProperty:function(e,t,r){function n(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){return typeof e==="function"}if(typeof e!=="object"||e===null)throw new TypeError("bad desc");var n={};if(t(e,"enumerable"))n.enumerable=!!e.enumerable;if(t(e,"configurable"))n.configurable=!!e.configurable;if(t(e,"value"))n.value=e.value;if(t(e,"writable"))n.writable=!!e.writable;if(t(e,"get")){var i=e.get;if(!r(i)&&typeof i!=="undefined")throw new TypeError("bad get");n.get=i}if(t(e,"set")){var o=e.set;if(!r(o)&&typeof o!=="undefined")throw new TypeError("bad set");n.set=o}if(("get"in n||"set"in n)&&("value"in n||"writable"in n))throw new TypeError("identity-confused descriptor");return n}if(typeof e!=="object"||e===null)throw new TypeError("bad obj");r=Object(r);var i=n(r);if(Object.defineProperty&&(Browser.name=="ie"&&Browser.version!=8)){Object.defineProperty(e,key,i)}else{if(i.value)e[key]=i.value;if(i.get)e["get"+key.capitalize()]=i.get;if(i.set)e["set"+key.capitalize()]=i.set}return e};if(Browser.name=="ie"&&Browser.version<9){Browser.ieuns=true}else if(Browser.name=="ie"&&Browser.version<10){Browser.iecomp=true}if(Browser.iecomp){COMMON.AjaxModule.load("ie_adapter",null,false);layout["debugger"]=true}