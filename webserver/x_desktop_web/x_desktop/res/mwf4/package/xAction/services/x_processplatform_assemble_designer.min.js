MWF.xAction.RestActions.Action["x_processplatform_assemble_designer"]=new Class({Extends:MWF.xAction.RestActions.Action,getId:function(i,e,a,t){this.action.invoke({name:"getId",async:t,parameter:{count:i},success:e,failure:a})},getUUID:function(e){var a="";this.action.invoke({name:"getId",async:false,parameter:{count:"1"},success:function(i){a=i.data[0].id;if(e)e(a)},failure:null});return a},listApplication:function(i,e,a,t){if(i){this.action.invoke({name:"listApplicationByCategory",async:t,parameter:{applicationCategory:i},success:e,failure:a})}else{this.action.invoke({name:"listApplication",async:t,success:e,failure:a})}},listApplicationSummary:function(i,e,a,t){if(i){this.action.invoke({name:"listApplicationByCategorySummary",async:t,parameter:{applicationCategory:i},success:e,failure:a})}else{this.action.invoke({name:"listApplicationSummary",async:t,success:e,failure:a})}},listApplicationCategory:function(i,e,a){this.action.invoke({name:"listApplicationCategory",async:a,success:i,failure:e})},getApplication:function(i,e,a,t){this.action.invoke({name:"getApplication",async:t,parameter:{id:i},success:e,failure:a})},saveApplication:function(i,e,a){if(i.id){this.updateApplication(i,e,a)}else{this.addApplication(i,e,a)}},updateApplication:function(i,e,a){this.action.invoke({name:"updataApplication",data:i,parameter:{id:i.id},success:e,failure:a})},addApplication:function(e,a,t){this.getId(1,function(i){e.id=i.data[0].id;this.action.invoke({name:"addApplication",data:e,success:a,failure:t})}.bind(this))},changeApplicationIcon:function(i,e,a,t,n){this.action.invoke({name:"updateApplicationIcon",parameter:{id:i},data:t,file:n,success:e,failure:a})},listProcess:function(i,e,a,t){this.action.invoke({name:"listProcess",async:t,parameter:{id:i},success:e,failure:a})},listForm:function(i,e,a,t){this.action.invoke({name:"listForm",async:t,parameter:{id:i},success:e,failure:a})},listDictionary:function(i,e,a,t){this.action.invoke({name:"listDictionary",async:t,parameter:{application:i},success:e,failure:a})},listScript:function(i,e,a,t){this.action.invoke({name:"listScript",async:t,parameter:{id:i},success:e,failure:a})},listView:function(i,e,a,t){this.action.invoke({name:"listView",async:t,parameter:{id:i},success:e,failure:a})},listStat:function(i,e,a,t){this.action.invoke({name:"listStat",async:t,parameter:{id:i},success:e,failure:a})},listFormField:function(i,e,a,t){this.action.invoke({name:"listFormField",async:t,parameter:{id:i},success:e,failure:a})},listFormTemplate:function(i,e,a){this.action.invoke({name:"listFormTemplate",async:a,success:i,failure:e})},listFormTemplateCategory:function(i,e,a){this.action.invoke({name:"listFormTemplateCategory",async:a,success:i,failure:e})},listFormTemplatByCategory:function(i,e,a){this.action.invoke({name:"listFormTemplatByCategory",async:a,success:i,failure:e})},getForm:function(i,e,a,t){this.action.invoke({name:"getForm",async:t,parameter:{id:i},success:e,failure:a})},getView:function(i,e,a,t){this.action.invoke({name:"getView",async:t,parameter:{id:i},success:e,failure:a})},getStat:function(i,e,a,t){this.action.invoke({name:"getStat",async:t,parameter:{id:i},success:e,failure:a})},getProcess:function(i,e,a,t){this.action.invoke({name:"getProcess",async:t,parameter:{id:i},success:e,failure:a})},getDictionary:function(i,e,a,t){this.action.invoke({name:"getDictionary",async:t,parameter:{applicationDict:i},success:e,failure:a})},getScript:function(i,e,a,t){this.action.invoke({name:"getScript",async:t,parameter:{id:i},success:e,failure:a})},getScriptByName:function(i,e,a,t,n){this.action.invoke({name:"getScriptByName",async:n,parameter:{name:i,applicationId:e},success:a,failure:t})},getFormTemplate:function(i,e,a,t){this.action.invoke({name:"getFormTemplate",async:t,parameter:{id:i},success:e,failure:a})},saveProcess:function(i,e,a){if(!i.isNewProcess){this.updateProcess(i,e,a)}else{this.addProcess(i,e,a)}},addProcess:function(i,e,a){this.action.invoke({name:"addProcess",data:i,parameter:{id:i.categoryId},success:e,failure:a})},updateProcess:function(i,e,a){this.action.invoke({name:"updataProcess",data:i,parameter:{id:i.id},success:e,failure:a})},deleteProcess:function(i,e,a,t){this.action.invoke({name:"removeProcess",async:t,parameter:{id:i},success:e,failure:a})},saveFile:function(e,a,t){if(e.id){this.updataFile(e.id,e,a,t)}else{this.getUUID(function(i){e.id=i;this.addFile(e,a,t)}.bind(this))}},saveForm:function(i,e,a,t,n){if(!i.isNewForm){this.updateForm(i,e,a,t,n)}else{this.addForm(i,e,a,t,n)}},updateForm:function(i,e,a,t,n){var s,c;if(i)s=MWF.encodeJsonString(JSON.encode(i));if(e)c=MWF.encodeJsonString(JSON.encode(e));var o={id:i.json.id,name:i.json.name,alias:i.json.name,hasMobile:false,description:i.json.description,application:i.json.application,icon:i.json.formIcon,formFieldList:a};if(e&&e.json.moduleList){if(Object.keys(e.json.moduleList).length){o.hasMobile=true}else{o.hasMobile=false}}if(i)o.data=s;if(e)o.mobileData=c;this.action.invoke({name:"updataForm",data:o,parameter:{id:i.json.id},success:t,failure:n})},addForm:function(a,t,n,s,c){var o,r;if(!a.json.id){this.getUUID(function(i){a.json.id=i;if(a)o=MWF.encodeJsonString(JSON.encode(a));if(t)r=MWF.encodeJsonString(JSON.encode(t));var e={id:a.json.id,name:a.json.name,alias:a.json.name,hasMobile:false,description:a.json.description,application:a.json.application,icon:a.json.formIcon,formFieldList:n};if(t&&t.json.moduleList){if(Object.keys(t.json.moduleList).length){e.hasMobile=true}else{e.hasMobile=false}}if(a)e.data=o;if(t)e.mobileData=r;this.action.invoke({name:"addForm",data:e,parameter:{id:a.json.categoryId},success:s,failure:c})}.bind(this))}else{if(a)o=MWF.encodeJsonString(JSON.encode(a));if(t)r=MWF.encodeJsonString(JSON.encode(t));var i={id:a.json.id,name:a.json.name,alias:a.json.name,hasMobile:false,description:a.json.description,application:a.json.application};if(t&&t.json.moduleList){if(Object.keys(t.json.moduleList).length){i.hasMobile=true}else{i.hasMobile=false}}if(a)i.data=o;if(t)i.mobileData=r;this.action.invoke({name:"addForm",data:i,parameter:{id:a.json.categoryId},success:s,failure:c})}},deleteForm:function(i,e,a,t){this.action.invoke({name:"removeForm",async:t,parameter:{id:i},success:e,failure:a})},addFormTemplate:function(t,n,s,c,o){var r,d;debugger;this.getUUID(function(i){s.id=i;if(t){var e=Object.clone(t);e.json.id=i;e.json.name=s.name;r=MWF.encodeJsonString(JSON.encode(e))}if(n){var a=Object.clone(n);a.json.id=i;a.json.name=s.name;d=MWF.encodeJsonString(JSON.encode(a))}if(t)s.data=r;if(n)s.mobileData=d;this.action.invoke({name:"addFormTemplate",data:s,success:c,failure:o})}.bind(this))},deleteFormTemplate:function(i,e,a,t){this.action.invoke({name:"deleteFormTemplate",async:t,parameter:{id:i},success:e,failure:a})},saveView:function(i,e,a){if(!i.isNewView){this.updateView(i,e,a)}else{i.isNewView=false;this.addView(i,e,a)}},updateView:function(i,e,a){var t=i.data;i.data=JSON.encode(i.data);this.action.invoke({name:"updataView",data:i,parameter:{id:i.id},success:e,failure:a});i.data=t},addView:function(e,a,t){var n=e.data;e.data=JSON.encode(e.data);if(!n.id){this.getUUID(function(i){e.id=i;this.action.invoke({name:"addView",data:e,success:a,failure:t});e.data=n}.bind(this))}else{this.action.invoke({name:"addView",data:e,success:a,failure:t});e.data=n}},saveStat:function(i,e,a){if(!i.isNewView){this.updateStat(i,e,a)}else{i.isNewView=false;this.addStat(i,e,a)}},updateStat:function(i,e,a){var t=i.data;i.data=JSON.encode(i.data);this.action.invoke({name:"updataStat",data:i,parameter:{id:i.id},success:e,failure:a});i.data=t},addStat:function(e,a,t){var n=e.data;e.data=JSON.encode(e.data);if(!n.id){this.getUUID(function(i){e.id=i;this.action.invoke({name:"addStat",data:e,success:a,failure:t});e.data=n}.bind(this))}else{this.action.invoke({name:"addView",data:e,success:a,failure:t});e.data=n}},deleteView:function(i,e,a,t){this.action.invoke({name:"removeView",async:t,parameter:{id:i},success:e,failure:a})},deleteStat:function(i,e,a,t){this.action.invoke({name:"removeStat",async:t,parameter:{id:i},success:e,failure:a})},saveDictionary:function(i,e,a){if(i.id){this.updateDictionary(i,e,a)}else{this.addDictionary(i,e,a)}},updateDictionary:function(i,e,a){this.action.invoke({name:"updataDictionary",data:i,parameter:{applicationDict:i.id},success:e,failure:a})},addDictionary:function(i,e,a){if(!i.id){var t=Object.clone(i);this.getUUID(function(i){t.id=i;this.action.invoke({name:"addDictionary",data:t,success:e,failure:a})}.bind(this))}},deleteDictionary:function(i,e,a,t){this.action.invoke({name:"removeDictionary",async:t,parameter:{applicationDict:i},success:e,failure:a})},saveScript:function(i,e,a){if(!i.isNewScript){this.updateScript(i,e,a)}else{this.addScript(i,e,a)}},updateScript:function(i,e,a){this.action.invoke({name:"updataScript",data:i,parameter:{id:i.id},success:e,failure:a})},addScript:function(e,a,t){if(!e.id){this.getUUID(function(i){e.id=i;this.action.invoke({name:"addScript",data:e,success:a,failure:t})}.bind(this))}else{this.action.invoke({name:"addScript",data:e,success:a,failure:t})}},deleteScript:function(i,e,a,t){this.action.invoke({name:"removeScript",async:t,parameter:{id:i},success:e,failure:a})},loadView:function(i,e,a,t){this.action.invoke({name:"loadView",async:t,parameter:{id:i},success:e,failure:a})},loadStat:function(i,e,a,t){this.action.invoke({name:"loadStat",async:t,parameter:{id:i},success:e,failure:a})}});